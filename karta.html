<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title data-i18n="map.title">Världskarta</title>

  <link rel="stylesheet" href="karka.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="reset.css">
</head>
<body>
  <nav class="navbar">
    <ul>
      <li><a href="karta.html"><img src="varldskarta.png" alt="Världskarta"><span class="nav-text" data-i18n="nav.world">Världskarta</span></a></li>
      <li><a href="profil.html"><img src="profil.png" alt="Profil"><span class="nav-text" data-i18n="nav.profile">Profil</span></a></li>
      <li><a href="inställning.html"><img src="settings.png" alt="Inställningar"><span class="nav-text" data-i18n="nav.settings">Inställningar</span></a></li>
    </ul>
  </nav>

  <header class="page-header">
    <h1 data-i18n="map.title">Världskarta</h1>
    <p data-i18n="map.subtitle">Utforska olika områden, gå från vänster till höger!</p>
  </header>

  <main class="grid" role="main" aria-label="Karta">
    <div class="grid-item">
      <img src="castle.png" alt="Slott" loading="lazy" decoding="async" data-start="play.html?area=castle" data-i18n="area.castle" data-i18n-attr="alt" data-desc="area.castle.desc">
      <div class="grid-label" data-i18n="area.castle">Slott</div>
    </div>

    <div class="grid-item">
      <img src="village.png" alt="By" loading="lazy" decoding="async" data-start="play.html?area=village" data-i18n="area.village" data-i18n-attr="alt" data-desc="area.village.desc">
      <div class="grid-label" data-i18n="area.village">By</div>
    </div>

    <div class="grid-item">
      <img src="forest.png" alt="Skog" loading="lazy" decoding="async" data-start="play.html?area=forest" data-i18n="area.forest" data-i18n-attr="alt" data-desc="area.forest.desc">
      <div class="grid-label" data-i18n="area.forest">Skog</div>
    </div>

    <div class="grid-item">
      <img src="cave.png" alt="Grotta" loading="lazy" decoding="async" data-start="play.html?area=cave" data-i18n="area.cave" data-i18n-attr="alt" data-desc="area.cave.desc">
      <div class="grid-label" data-i18n="area.cave">Grotta</div>
    </div>

    <div class="grid-item">
      <img src="lake.png" alt="Sjön" loading="lazy" decoding="async" data-start="play.html?area=lake" data-i18n="area.lake" data-i18n-attr="alt" data-desc="area.lake.desc">
      <div class="grid-label" data-i18n="area.lake">Sjön</div>
    </div>

    <div class="grid-item large">
      <img src="tower-tail.png" alt="Torn med drake" loading="lazy" decoding="async" data-start="play.html?area=tower" data-i18n="area.bigarea" data-i18n-attr="alt" data-desc="area.bigarea.desc">
      <div class="grid-label" data-i18n="area.bigarea">Torn med drake</div>
    </div>

    <div class="grid-item">
      <img src="tower.png" alt="Torn" loading="lazy" decoding="async" data-start="play.html?area=tower" data-i18n="area.tower" data-i18n-attr="alt" data-desc="area.tower.desc">
      <div class="grid-label" data-i18n="area.tower">Torn</div>
    </div>

    <div class="grid-item">
      <img src="fields.png" alt="Fält" loading="lazy" decoding="async" data-start="play.html?area=fields" data-i18n="area.fields" data-i18n-attr="alt" data-desc="area.fields.desc">
      <div class="grid-label" data-i18n="area.fields">Fält</div>
    </div>

    <div class="grid-item">
      <img src="mine.png" alt="Gruva" loading="lazy" decoding="async" data-start="play.html?area=mine" data-i18n="area.mine" data-i18n-attr="alt" data-desc="area.mine.desc">
      <div class="grid-label" data-i18n="area.mine">Gruva</div>
    </div>

    <div class="grid-item">
      <img src="ruins.png" alt="Ruiner" loading="lazy" decoding="async" data-start="play.html?area=ruins" data-i18n="area.ruins" data-i18n-attr="alt" data-desc="area.ruins.desc">
      <div class="grid-label" data-i18n="area.ruins">Ruiner</div>
    </div>

    <div class="grid-item">
      <img src="port.png" alt="Hamnen" loading="lazy" decoding="async" data-start="play.html?area=port" data-i18n="area.port" data-i18n-attr="alt" data-desc="area.port.desc">
      <div class="grid-label" data-i18n="area.port">Hamnen</div>
    </div>
  </main>

  <!-- Modal popup -->
  <div id="modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-overlay" data-close></div>
    <div class="modal-panel" role="document" aria-labelledby="modal-title">
      <button class="modal-close" aria-label="Close" data-close>&times;</button>
      <img class="modal-img" src="" alt="">
      <div class="modal-body">
        <h2 id="modal-title" class="modal-title"></h2>
        <p class="modal-text"></p>
        <div class="modal-actions">
          <button class="modal-start" data-i18n="modal.start">Start</button>
          <button class="modal-cancel" data-close data-i18n="modal.cancel">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script src="language.js"></script>
  <script src="theme.js"></script>
  <script src="karta.js"></script>
  <script>
    // convert clicks on grid to open play.html?area=... links
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.grid-item').forEach(item => {
        item.addEventListener('click', () => {
          const href = item.querySelector('img')?.dataset?.start;
          if (href) location.href = href;
        });
        item.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); item.click(); } });
      });
    });
  </script>
</body>
</html>